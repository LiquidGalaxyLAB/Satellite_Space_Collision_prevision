package utilities

import android.os.Build
import androidx.annotation.RequiresApi
import kotlin.math.*

@RequiresApi(Build.VERSION_CODES.O)
fun createKMLFile1(sat1: String, sat2: String): String {
    val kmlTemplate = "<kml xmlns=\"http://www.opengis.net/kml/2.2\"\n" +
            "xmlns:atom=\"http://www.w3.org/2005/Atom\" \n" +
            " xmlns:gx=\"http://www.google.com/kml/ext/2.2\"> \n" +
            "    <Document>\n" +
            "        <name>Satellite Trajectories</name>\n" +
            "        \n" +
            " <open>1</open>\n" +
            "        <Style id=\"satellite1\">\n" +
            "            <LineStyle>\n" +
            "                <color>ff0000ff</color>\n" +
            "                <width>2</width>\n" +
            "            </LineStyle>\n" +
            "        </Style>\n" +
            "        \n" +
            "        <Style id=\"satellite2\">\n" +
            "            <LineStyle>\n" +
            "                <color>ff00ff00</color>\n" +
            "                <width>2</width>\n" +
            "            </LineStyle>\n" +
            "        </Style>\n" +
            "        <Placemark>\n" +
            "            <name>Satellite 1</name>\n" +
            "            <styleUrl>#satellite1</styleUrl>\n" +
            "            <LineString>\n" +
            "                <extrude>1</extrude>\n" +
            "                <tessellate>1</tessellate>\n" +
            "                <altitudeMode>absolute</altitudeMode>\n" +
            "                <coordinates>%satellite1Coordinates%</coordinates>\n" +
            "            </LineString>\n" +
            "        </Placemark>\n" +
            "        \n" +
            "        <Placemark>\n" +
            "            <name>Satellite 2</name>\n" +
            "            <styleUrl>#satellite2</styleUrl>\n" +
            "            <LineString>\n" +
            "                <extrude>1</extrude>\n" +
            "                <tessellate>1</tessellate>\n" +
            "                <altitudeMode>absolute</altitudeMode>\n" +
            "                <coordinates>%satellite2Coordinates%</coordinates>\n" +
            "            </LineString>\n" +
            "        </Placemark>\n" +
            "    </Document>\n" +
            "</kml>"

    val satellite1Coordinates = "88.14934063998784,8.300003948410678,1447993.2667596196\n" +
            "89.82675860101737,10.516965557029717,1448067.3925354877\n" +
            "91.52998523766762,12.72327716158205,1448092.6399846082\n" +
            "93.26488692029847,14.916397126528798,1448070.8364915047\n" +
            "95.03758259198203,17.093647124177473,1448004.2445083784\n" +
            "96.85448681905349,19.25218296875912,1447895.5332124967\n" +
            "98.72235113385756,21.388962731419657,1447747.746141372\n" +
            "100.64830218314444,23.500711799011683,1447564.2651996638\n" +
            "102.63987451915273,25.583884639767323,1447348.7714639246\n" +
            "104.70503483109361,27.63462305022718,1447105.2032505926\n" +
            "106.85219333525771,29.64871098758104,1446837.711925425\n" +
            "109.09019643142706,31.621526295057134,1446550.6159547362\n" +
            "111.42829292342638,33.54799011435185,1446248.3537023661\n" +
            "113.87606385944981,35.42251534433172,1445935.4354866117\n" +
            "116.44330381654603,37.23895647391063,1445616.3953893448\n" +
            "119.13983894139314,38.990564094367684,1445295.7433249666\n" +
            "121.9752655631928,40.669949026931604,1444977.9178315778\n" +
            "124.95859265536453,42.26906259585447,1444667.2400499966\n" +
            "128.09777372227154,43.77920154659673,1444367.869325593\n" +
            "131.39912034846355,45.19104804949147,1444083.7608238438\n" +
            "134.866601791501,46.49475639809329,1443818.6255572813\n" +
            "138.5010554309547,47.680098384174535,1443575.8931499473\n" +
            "142.2993603216277,48.73667728363951,1443358.677661694\n" +
            "146.25365925008242,49.65421556006269,1443169.7467472828\n" +
            "150.35074649196852,50.422912837443064,1443011.494397639\n" +
            "154.5717585379703,51.033858735088714,1442885.9174746238\n" +
            "158.8923000975614,51.479471258187225,1442794.5962176018\n" +
            "163.2830970496062,51.75391868735429,1442738.678866341\n" +
            "167.71118992291912,51.85347540749867,1442718.8705161097\n" +
            "172.14157982655445,51.77676375571391,1442735.4262835076\n" +
            "176.53914039322007,51.524846348582706,1442788.1488337445\n" +
            "-179.12945337927854,51.10115472692542,1442876.3902862323\n" +
            "-174.89403227925965,50.51126528998111,1442999.0584859517\n" +
            "-170.77967346228854,49.76255571389237,1443154.6275932177\n" +
            "-166.80597606053558,48.86378876435173,1443341.1529194464\n" +
            "-162.98687071352253,47.82467345618159,1443556.2898923145\n" +
            "-159.33087927059697,46.65544693399148,1443797.3170190859\n" +
            "-155.84169567977042,45.36650822227096,1444061.1626656356\n" +
            "-152.51894968788102,43.96812100010137,1444344.4354437827\n" +
            "-149.3590324720904,42.47019016684507,1444643.4579757745\n" +
            "-146.35589467530326,40.88210808504745,1444954.3037455434\n" +
            "-143.501760201525,39.21266087899942,1445272.8367457604\n" +
            "-140.78772815565907,37.469983097276156,1445594.7535631843\n" +
            "-138.20425599796553,35.66154882449386,1445915.6275474986\n" +
            "-135.74153073995453,33.79418874719864,1446230.9546451047\n" +
            "-133.38974190323984,31.874124356730942,1446536.2004797808\n" +
            "-131.13927279148012,29.907012459386685,1446826.848225713\n" +
            "-128.98082659141406,27.897994989359113,1447098.4467898188\n" +
            "-126.90550206844246,25.851750503196598,1447346.658821203\n" +
            "-124.90483147133511,23.772544996324015,1447567.3080408445\n" +
            "-122.97079080605509,21.664280512226995,1447756.4253873085\n" +
            "-121.09579055012028,19.530540781311597,1447910.293463353\n" +
            "-119.27265275100841,17.374633360056297,1448025.488797093\n" +
            "-117.49457921421075,15.199628389483662,1448098.921416784\n" +
            "-115.75511386015884,13.00839389919643,1448127.8712909103\n" +
            "-114.04810171610899,10.803628090362066,1448110.0211882552\n" +
            "-112.36764601857834,8.587888829436208,1448043.485565846\n" +
            "-110.70806448739769,6.363620773479288,1447926.835126608\n" +
            "-109.06384541123874,4.133180551051832,1447759.116743168\n" +
            "-107.42960381757605,1.898860331561979,1447539.8684922704\n" +
            "-105.80003790170109,-0.3370897565377195,1447269.1296067676\n" +
            "-104.16988574549093,-2.5724399088151495,1446947.4452233221\n" +
            "-102.53388210482798,-4.804959402631307,1446575.8658384345\n" +
            "-100.88671532978032,-7.032395196779395,1446155.9415019432\n" +
            "-99.22298413096,-9.252450194344293,1445689.7107849936\n" +
            "-97.53715423301296,-11.462760632935165,1445179.6846718863\n" +
            "-95.82351489329598,-13.660872264697469,1444628.8255588831\n" +
            "-94.07613546535256,-15.844214920899706,1444040.5216096113\n" +
            "-92.28882242419377,-18.010075040536037,1443418.556776613\n" +
            "-90.45507754612832,-20.155565797515845,1442767.0768363702\n" +
            "-88.56805836324544,-22.2775944855904,1442090.5518241508\n" +
            "-86.62054270055332,-24.372826757901674,1441393.7353269265\n" +
            "-84.6048996375059,-26.437647663113157,1440681.621040148\n" +
            "-82.51307055737485,-28.46811923073795,1439959.3971200043\n" +
            "-80.33656500202001,-30.459934842730767,1439232.3987967107\n" +
            "-78.0664776799445,-32.40837091870898,1438506.059731575\n" +
            "-75.69353506691793,-34.308236788015506,1437785.8626552192\n" +
            "-73.20818204185306,-36.153824485841426,1437077.2897563789\n" +
            "-70.60072129444544,-37.93886111419249,1436385.7732871945\n" +
            "-67.86152049534117,-39.65646748615112,1435716.6468888293\n" +
            "-64.98130321422055,-41.29912846498424,1435075.0980512367\n" +
            "-61.95153917166137,-42.85868206713282,1434466.1221348527\n" +
            "-58.7649457712155,-44.326336281905036,1433894.4783456288\n" +
            "-55.416104595922086,-45.69272418699169,1433364.6480367146\n" +
            "-51.90218176616949,-46.948008920207535,1432880.7956642292\n" +
            "-48.2237187748762,-48.082049586624215,1432446.73268566\n" +
            "-44.385431695930514,-49.08463624265817,1432065.8847007023\n" +
            "-40.39692409715282,-49.94579625751942,1431741.262050672\n" +
            "-36.27319140039798,-50.65616478271179,1431475.4340911452\n" +
            "-32.03478248986086,-51.20739966124987,1431270.507314657\n" +
            "-27.70750085188004,-51.592607741818014,1431128.1074760389\n" +
            "-23.321579655002523,-51.80673870056915,1431049.365828055\n" +
            "-18.91035070838991,-51.8468979729713,1431034.9095652208\n" +
            "-14.508527123818094,-51.712535559004955,1431084.8565323593\n" +
            "-10.15030552940151,-51.40548268183469,1431198.8142334628\n" +
            "-5.867536394021483,-50.92983070412391,1431375.8831453759\n" +
            "-1.6881945203088033,-50.2916705932462,1431614.6643189455\n" +
            "2.364686972421094,-49.498730356356354,1431913.2712128407\n" +
            "6.2735538276056655,-48.55995774049158,1432269.345691637\n" +
            "10.026368410688413,-47.48509521832101,1432680.0780765768\n" +
            "13.616246466325531,-46.284285829318236,1433142.2311191745\n" +
            "17.040823685400888,-44.967735741572575,1433652.167735563\n" +
            "20.30148254180794,-43.54544623212881,1434205.8823022482\n" +
            "23.402547939507066,-42.02701675464438,1434799.035298304\n" +
            "26.350528644774403,-40.4215132403917,1435426.9910205388\n" +
            "29.15345056340473,-38.73739147602746,1436084.8581107666\n" +
            "31.820302059244447,-36.98246407855714,1436767.5325504928\n" +
            "34.36059360763785,-35.163899896167784,1437469.742775824\n" +
            "36.784023064784904,-33.28824600113638,1438186.096561403\n" +
            "39.10023198238302,-31.36146444954388,1438911.1292184726\n" +
            "41.31863700234171,-29.38897758323096,1439639.3527160874\n" +
            "43.44832065214632,-27.375717469280442,1440365.3052409112\n" +
            "45.49796783671384,-25.326176272252955,1441083.6007504703\n" +
            "47.47583633855284,-23.24445560080541,1441788.9779924075\n" +
            "49.389752145833235,-21.134313455244673,1442476.3485309642\n" +
            "51.24712230302136,-18.999208133416357,1443140.8432623595\n" +
            "53.05495980671385,-16.842338793498485,1443777.8569274757\n" +
            "54.819916458057556,-14.666682691338087,1444383.0901272562\n" +
            "56.54832082274249,-12.475029168710766,1444952.588398928\n" +
            "58.246219162653794,-10.270010761259162,1445482.7778815834\n" +
            "59.91941797884909,-8.054131742946005,1445970.4971702022\n" +
            "61.57352731695155,-5.829794431496669,1446413.0249984253\n" +
            "63.21400427331778,-3.5993236868993015,1446808.1034113616\n" +
            "64.84619638507398,-1.3649900659494185,1447153.9561436372\n" +
            "66.47538492379542,0.8709681020332907,1447449.3020097741\n" +
            "68.10682805267372,3.1063232321430228,1447693.363128311\n" +
            "69.74580394390253,5.338837192654758,1447885.8678867798\n" +
            "71.39765401395299,7.566239852967782,1448027.0486234913\n" +
            "73.06782637721066,9.78620706332568,1448117.634058936\n" +
            "74.76191953726695,11.99633762954065,1448158.8365764911\n" +
            "76.48572630868782,14.194128944080768,1448152.3345210608\n" +
            "78.24527768699552,16.37695080137551,1448100.2497376667\n" +
            "80.04688622430758,18.5420170351528,1448005.1206341763\n" +
            "81.89718807014998,20.6863545655164,1447869.8711012304\n" +
            "83.80318240035997,22.806769520070585,1447697.7756673407\n" +
            "85.7722662639574,24.899810095864762,1447492.421308806\n" +
            "87.81226202740464,26.961725944191652,1447257.666369073\n" +
            "89.93143361941902,28.98842415610638,1446997.59705177\n" +
            "92.13848609344411,30.975421917024992,1446716.48199664\n" +
            "94.44254156974718,32.917796575431275,1446418.7254294127\n" +
            "96.85308228035623,34.810134183471256,1446108.8194082514\n" +
            "99.37984942725355,36.64647860376922,1445791.2956498282\n" +
            "102.03268376660448,38.420283976947104,1445470.6774621864\n" +
            "104.82129229928115,40.124375055134244,1445151.432240409"
    //val satellite1Coordinates = callToServer.getCoordinates(sat1)

    //val satellite2Coordinates = callToServer.getCoordinates(sat2)
    val satellite2Coordinates = "6.523042476521053,-28.352667249953633,1438630.5709120021\n" +
            "8.60972788189503,-26.32063436633239,1439353.0861417288\n" +
            "10.620737323288921,-24.25450383456622,1440065.210918653\n" +
            "12.56409869639502,-22.158191026280583,1440761.7709966248\n" +
            "14.447413346915404,-20.03529113176145,1441437.7890071047\n" +
            "16.27787574599821,-17.88912126149422,1442088.5299595536\n" +
            "18.062302834123226,-15.72275928701393,1442709.5444545327\n" +
            "19.80716983025107,-13.539079260992319,1443296.70921039\n" +
            "21.518649832829755,-11.340783896360913,1443846.2643712207\n" +
            "23.202655685147832,-9.130434251098837,1444354.8472213016\n" +
            "24.864882957717043,-6.910477017332795,1444819.5219013572\n" +
            "26.510853327851493,-4.683269840845247,1445237.8047688673\n" +
            "28.145957994502705,-2.4511050448073424,1445607.685109449\n" +
            "29.775500976554913,-0.21623213802481925,1445927.6409558551\n" +
            "31.40474227320492,2.0191204923108828,1446196.6498236936\n" +
            "33.038940903181945,4.252724236772555,1446414.1942293684\n" +
            "34.68339805469438,6.482329019659524,1446580.2619468933\n" +
            "36.343500330425336,8.705641585803466,1446695.340986564\n" +
            "38.02476329163234,10.920303073549583,1446760.4093815607\n" +
            "39.73287521124984,13.123865359229955,1446776.9199065717\n" +
            "41.473740963059896,15.313765849473159,1446746.7799298395\n" +
            "43.253525673862235,17.48730027872118,1446672.3266496242\n" +
            "45.07869746308267,19.64159307267596,1446556.2980269387\n" +
            "46.95606832587101,21.773565017685538,1446401.7997676947\n" +
            "48.89283141860103,23.879897745137235,1446212.2687595068\n" +
            "50.89659253995269,25.956994930160207,1445991.4333904895\n" +
            "52.975392373811054,28.00093996170498,1445743.2712206787\n" +
            "55.13771496005282,30.007450226232642,1445471.9644883384\n" +
            "57.39247622789892,31.971828406261846,1445181.8539496576\n" +
            "59.74898448308336,33.888911641293745,1444877.3915616116\n" +
            "62.21686261187191,35.75302013133023,1444563.0925075796\n" +
            "64.80591923937752,37.557907548189625,1444243.4870775514\n" +
            "67.52595401688463,39.29671695434756,1443923.0728816588\n" +
            "70.38648048084121,40.9619472984517,1443606.2678799834\n" +
            "73.39635014158586,42.54543746724911,1443297.3646680592\n" +
            "76.56326406750959,44.03837663932559,1443000.486463042\n" +
            "79.89316600108181,45.43135169232253,1442719.5451698832\n" +
            "83.38952443407915,46.714443416878,1442458.2019141898\n" +
            "87.05253265407987,47.87738327239619,1442219.8303751124\n" +
            "90.87828472999814,48.90978005615733,1442007.4832179085\n" +
            "94.85801854909823,49.80142028396827,1441823.8619066658\n" +
            "98.97754772056096,50.54263696315544,1441671.2901346115\n" +
            "103.2170206925626,51.124728989042474,1441551.6910765467\n" +
            "107.55113495252523,51.54039947748796,1441466.5686317573\n" +
            "111.94988622964735,51.784169163574276,1441416.9928071657\n" +
            "116.37984973685542,51.85271498657277,1441403.5893384453\n" +
            "120.8058869698445,51.74508739407327,1441426.533628136\n" +
            "125.19307724384568,51.46277410459607,1441485.549045763\n" +
            "129.50862027148327,51.00960053028391,1441579.9095992974\n" +
            "133.72346289339208,50.39148210387696,1441708.4469610564\n" +
            "137.81346768261025,49.616064778127935,1441869.5617964498\n" +
            "141.76004024745262,48.692301858616375,1442061.239312873\n" +
            "145.55023311034094,47.63001646421277,1442281.0689151473\n" +
            "149.17642025967663,46.43949112010306,1442526.2678196472\n" +
            "152.63567545723328,45.131113098886274,1442793.7084509127\n" +
            "155.9289907398183,43.71509034991029,1443079.949398261\n" +
            "159.0604511073708,42.201240921182674,1443381.2697008136\n" +
            "162.0364488982614,40.598850580447525,1443693.7061657438\n" +
            "164.86498890030282,38.91658847886476,1444013.0934163989\n" +
            "167.55510768294616,37.16246898348671,1444335.1063201914\n" +
            "170.11641110058602,35.34384799030549,1444655.3044247117\n" +
            "172.5587215726879,33.46744350959455,1444969.177983606\n" +
            "174.89182076066652,31.53937201165957,1445272.1951576686\n" +
            "177.12527084320976,29.565194130115177,1445559.8499173697\n" +
            "179.26829822834114,27.549964915782137,1445827.7101767338\n" +
            "-178.67027475194985,25.498285302596038,1446071.4656663698\n" +
            "-176.6820622782044,23.414352540627746,1446286.9750458065\n" +
            "-174.759121497529,21.30200832762719,1446470.3117361874\n" +
            "-172.89394049508135,19.16478376857326,1446617.8079822767\n" +
            "-171.0794136627571,17.005940930407995,1446726.0966365703\n" +
            "-169.3088086815172,14.828510898834269,1446792.1501900633\n" +
            "-167.57572826944005,12.635328569506305,1446813.3165879198\n" +
            "-165.8740687552024,10.429064333079477,1446787.3514062194\n" +
            "-164.19797706092913,8.212253137069837,1446712.4459944982\n" +
            "-162.54180697496759,5.98732123757494,1446587.2512421173\n" +
            "-160.90007524104834,3.7566109912335124,1446410.8966658965\n" +
            "-159.2674178695682,1.522404234979461,1446183.0045838663\n" +
            "-157.63854664232585,-0.7130555046070558,1445903.6991837036\n" +
            "-156.00820591159265,-2.94754141657663,1445573.6103781583\n" +
            "-154.37112947511744,-5.178822184114302,1445193.8723762129\n" +
            "-152.7219975213921,-7.404640591421153,1444766.1169990432\n" +
            "-151.0553934382357,-9.62269168597614,1444292.4618006141\n" +
            "-149.36576048637542,-11.830600026556608,1443775.4931437387\n" +
            "-147.64735835507057,-14.025895655834052,1443218.2444268113\n" +
            "-145.89421984395545,-16.20598835441694,1442624.1697308663\n" +
            "-144.1001080479774,-18.36813985880442,1441997.1131791007\n" +
            "-142.25847488099882,-20.50943358238948,1441341.2743863242\n" +
            "-140.36242212166232,-22.626741532548312,1440661.1703861193\n" +
            "-138.4046668585421,-24.716688078157183,1439961.5944837518\n" +
            "-136.37751389135937,-26.77561045363127,1439247.5724669816\n" +
            "-134.27283887100572,-28.79951585633566,1438524.3166856146\n" +
            "-132.08208715596044,-30.784035389958476,1437797.1784751078\n" +
            "-129.79629509135682,-32.724375389941905,1437071.5994295278\n" +
            "-127.4061423117532,-34.61526725015483,1436353.0620055893\n" +
            "-124.90204603234258,-36.45091747292863,1435647.0399781554\n" +
            "-122.27431035722205,-38.22496081374861,1434958.9491908788\n" +
            "-119.51334579809054,-39.930420494522934,1434294.0990883806\n" +
            "-116.60997511337456,-41.55968110097188,1433657.6454627467\n" +
            "-113.55584054833939,-43.1044816058641,1433054.5448055184\n" +
            "-110.34392368813832,-44.55593760320044,1432489.5107091425\n" +
            "-106.96917932892335,-45.904603723374606,1431966.9726116273\n" +
            "-103.42926941293133,-47.14058767979856,1431491.037256952\n" +
            "-99.72535935335193,-48.25372675945117,1431065.4531428954\n" +
            "-95.86290960891574,-49.23383414791367,1430693.5782499118\n" +
            "-91.85236272835523,-50.07101613154148,1430378.3512437474\n" +
            "-87.70960084218491,-50.756050974929124,1430122.2663987165\n" +
            "-83.45603964913867,-51.280807772107394,1429927.3523739323\n" +
            "-79.11824770331289,-51.638670181672104,1429795.155020371\n" +
            "-74.72703695486385,-51.82492002531417,1429726.7242991999\n" +
            "-70.31606054840161,-51.837032513762765,1429722.605421041\n" +
            "-65.92005287259212,-51.67484176038189,1429782.8342491\n" +
            "-61.57292801035157,-51.34055184284305,1429906.9369987661\n" +
            "-57.305985826134695,-50.838591717345544,1430093.9342373845\n" +
            "-53.14644983829653,-50.17533578584987,1430342.3491583948\n" +
            "-49.116485177655626,-49.35872974788182,1430650.220070139\n" +
            "-45.23274577391475,-48.39786955007205,1431015.1170327766\n" +
            "-41.506408342624674,-47.30257950507699,1431434.1625214803\n" +
            "-37.943587239114294,-46.08302624495628,1431904.0559810551\n" +
            "-34.545997648722434,-44.74939217639371,1432421.1021073295\n" +
            "-31.31173918808072,-43.31161914628616,1432981.2426633667"

    val sat1 = satellite1Coordinates.split("\n")
    val sat2 = satellite2Coordinates.split("\n")
    var closestDistance = Double.MAX_VALUE
    var midpointX = 0.0
    var midpointY = 0.0
    var finalX = Double.MAX_VALUE
    var finalY = Double.MAX_VALUE
    var finalZ = Double.MAX_VALUE
    for (pos1 in sat1) {
        for (pos2 in sat2) {
            val positions1 = pos1.split(",")
            val positions2 = pos2.split(",")


            val x1 = positions1[0].toDouble()
            val y1 = positions1[1].toDouble()
            val x2 = positions2[0].toDouble()
            val y2 = positions2[1].toDouble()

            val distance = sqrt((x2 - x1).pow(2) + (y2 - y1).pow(2))

            midpointX = (x1 + x2) / 2
            midpointY = (y1 + y2) / 2

            if (distance < closestDistance) {
                closestDistance = distance
                finalX = midpointX
                finalY = midpointY
                finalZ = positions1[2].toDouble()
            }
        }
    }

    SSHConnection.flyto("${finalX},${finalY},0")
    val circleCoordinates = generateCircleCoordinates(finalX, finalY, finalZ)

    SSHConnection.printCollision(circleCoordinates)

    getTour(satellite1Coordinates)

    return kmlTemplate.replace("%satellite1Coordinates%", satellite1Coordinates.replace(" ", ""))
        .replace("%satellite2Coordinates%", satellite2Coordinates.replace(" ", ""))
}

fun getTour(coords: String) {
    val coords = coords.split("\n")
    val coord = coords[0].split(",")
    val alt = coord[2].toDouble() + 500000
    var kml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" +
            "<kml xmlns=\"http://www.opengis.net/kml/2.2\" xmlns:gx=\"http://www.google.com/kml/ext/2.2\" xmlns:kml=\"http://www.opengis.net/kml/2.2\" xmlns:atom=\"http://www.w3.org/2005/Atom\">\n" +
            "  <Document>\n" +
            "    <name>Tour</name>\n" +
            "    <open>1</open>\n" +
            "    <Folder>\n" +
            "    <gx:Tour>\n" +
            "      <name>Satellitetour</name>\n" +
            "      <gx:Playlist>\n" +
            "<gx:FlyTo>\n" +
            "    <gx:duration>2</gx:duration>\n" +
            "    <gx:flyToMode>smooth</gx:flyToMode>\n" +
            "     <LookAt>\n" +
            "      <longitude>${coord[0]}</longitude>\n" +
            "      <latitude>${coord[1]}</latitude>\n" +
            "      <altitude>${alt}</altitude>\n" +
            "      <heading>0</heading>\n" +
            "      <tilt>30</tilt>\n" +
            "      <range>10000000</range>\n" +
            "      <gx:altitudeMode>absolute</gx:altitudeMode>\n" +
            "      </LookAt>\n" +
            "    </gx:FlyTo>\n"


    for (coord in coords) {
        val coord = coord.split(",")
        val alt = coord[2].toDouble() + 500000

        kml = kml + "<gx:FlyTo>\n" +
                "    <gx:duration>0.5</gx:duration>\n" +
                "    <gx:flyToMode>smooth</gx:flyToMode>\n" +
                "     <LookAt>\n" +
                "      <longitude>${coord[0]}</longitude>\n" +
                "      <latitude>${coord[1]}</latitude>\n" +
                "      <altitude>${alt}</altitude>\n" +
                "      <heading>0</heading>\n" +
                "      <tilt>30</tilt>\n" +
                "      <range>10000000</range>\n" +
                "      <gx:altitudeMode>absolute</gx:altitudeMode>\n" +
                "      </LookAt>\n" +
                "    </gx:FlyTo>\n"
    }

    kml = kml + " </gx:Playlist>\n" +
            "    </gx:Tour>\n" +
            " </Folder>\n" +
            "  </Document>\n" +
            "</kml>"

    val command = "chmod 777 /var/www/html/tourSat.kml; echo '${kml}' > /var/www/html/tourSat.kml"
    SSHConnection.executeCommand(command)
    val command2 = "chmod 777 /var/www/html/kmls.txt; echo '" +
            "http://lg1:81/tourSat.kml" +
            "' >> /var/www/html/kmls.txt"
    SSHConnection.executeCommand(command2)
}

fun generateCircleCoordinates(
    centerX: Double,
    centerY: Double,
    centerZ: Double
): String {
    val coordinates = StringBuilder()
    val radius1 = 1.0
    val radius2 = 0.75

    // Create a list of points that form the sphere
    val points = (0..180).step(10).flatMap { i ->
        (0..360).step(10).map { j ->
            val x = centerX + radius1 * cos(Math.toRadians(i.toDouble())) * sin(
                Math.toRadians(
                    j.toDouble()
                )
            )
            val y = centerY + radius2 * sin(Math.toRadians(i.toDouble())) * sin(
                Math.toRadians(
                    j.toDouble()
                )
            )
            val z = centerZ + radius1 * 100000 * cos(Math.toRadians(j.toDouble()))
            coordinates.append("$x,$y,$z\n")
        }
    }
    return coordinates.toString()
}

